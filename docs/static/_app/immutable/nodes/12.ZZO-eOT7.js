import{s as be,n as Q,d as re,r as ve}from"../chunks/scheduler.UsNOiup1.js";import{S as ge,i as Ce,e as _,s as P,o as ie,c as p,m as O,f as L,g as U,d as b,y as ue,a as S,n as y,h as u,z as w,A as R,B as q,C as ke,r as ce,t as de,b as me,j as ye}from"../chunks/index.SfHOU22x.js";import{e as $}from"../chunks/each.6w4Ej4nR.js";import{u as Ee}from"../chunks/store.MIH45tLv.js";import{a as G,d as K,b as Pe,c as Le,u as fe,e as _e}from"../chunks/firebase.b69GNaWb.js";import{r as J}from"../chunks/regionsAndCounties.34LWOHa2.js";import{g as Se}from"../chunks/entry.7xPx3a1P.js";function pe(a,e,l){const t=a.slice();return t[8]=e[l],t}function Te(a,e,l){const t=a.slice();return t[11]=e[l],t}function xe(a){let e,l="Då måste vara inloggad för att skapa en klubb";return{c(){e=_("p"),e.textContent=l},l(t){e=p(t,"P",{"data-svelte-h":!0}),O(e)!=="svelte-kzb93y"&&(e.textContent=l)},m(t,n){U(t,e,n)},p:Q,d(t){t&&b(e)}}}function Ae(a){let e,l,t,n="Klubbnamn",c,i,h,s,d,F="Kort beskrivning",C,v,j,T,x,ee="Plats (region)",V,k,W,A,B,te="Plats (kommun)",X,g,Y,z,ne="Skapa klubb",Z,le,oe=$(J.regions),E=[];for(let o=0;o<oe.length;o+=1)E[o]=Be(Te(a,oe,o));let D=$(J.counties.filter(a[6])),m=[];for(let o=0;o<D.length;o+=1)m[o]=he(pe(a,D,o));return{c(){e=_("form"),l=_("p"),t=_("label"),t.textContent=n,c=P(),i=_("input"),h=P(),s=_("p"),d=_("label"),d.textContent=F,C=P(),v=_("input"),j=P(),T=_("p"),x=_("label"),x.textContent=ee,V=P(),k=_("select");for(let o=0;o<E.length;o+=1)E[o].c();W=P(),A=_("p"),B=_("label"),B.textContent=te,X=P(),g=_("select");for(let o=0;o<m.length;o+=1)m[o].c();Y=P(),z=_("button"),z.textContent=ne,this.h()},l(o){e=p(o,"FORM",{});var f=S(e);l=p(f,"P",{});var r=S(l);t=p(r,"LABEL",{for:!0,"data-svelte-h":!0}),O(t)!=="svelte-13lqg11"&&(t.textContent=n),c=L(r),i=p(r,"INPUT",{type:!0,id:!0}),r.forEach(b),h=L(f),s=p(f,"P",{});var I=S(s);d=p(I,"LABEL",{for:!0,"data-svelte-h":!0}),O(d)!=="svelte-2xcsvt"&&(d.textContent=F),C=L(I),v=p(I,"INPUT",{type:!0,id:!0}),I.forEach(b),j=L(f),T=p(f,"P",{});var H=S(T);x=p(H,"LABEL",{for:!0,"data-svelte-h":!0}),O(x)!=="svelte-zbriib"&&(x.textContent=ee),V=L(H),k=p(H,"SELECT",{id:!0});var ae=S(k);for(let N=0;N<E.length;N+=1)E[N].l(ae);ae.forEach(b),H.forEach(b),W=L(f),A=p(f,"P",{});var M=S(A);B=p(M,"LABEL",{for:!0,"data-svelte-h":!0}),O(B)!=="svelte-ck5n8k"&&(B.textContent=te),X=L(M),g=p(M,"SELECT",{id:!0});var se=S(g);for(let N=0;N<m.length;N+=1)m[N].l(se);se.forEach(b),M.forEach(b),Y=L(f),z=p(f,"BUTTON",{"data-svelte-h":!0}),O(z)!=="svelte-1e855am"&&(z.textContent=ne),f.forEach(b),this.h()},h(){y(t,"for","name"),y(i,"type","text"),y(i,"id","name"),y(d,"for","desc"),y(v,"type","text"),y(v,"id","desc"),y(x,"for","region"),y(k,"id","region"),a[1].region===void 0&&re(()=>a[5].call(k)),y(B,"for","county"),y(g,"id","county"),a[1].county===void 0&&re(()=>a[7].call(g))},m(o,f){U(o,e,f),u(e,l),u(l,t),u(l,c),u(l,i),w(i,a[1].name),u(e,h),u(e,s),u(s,d),u(s,C),u(s,v),w(v,a[1].desc),u(e,j),u(e,T),u(T,x),u(T,V),u(T,k);for(let r=0;r<E.length;r+=1)E[r]&&E[r].m(k,null);R(k,a[1].region,!0),u(e,W),u(e,A),u(A,B),u(A,X),u(A,g);for(let r=0;r<m.length;r+=1)m[r]&&m[r].m(g,null);R(g,a[1].county,!0),u(e,Y),u(e,z),Z||(le=[q(i,"input",a[3]),q(v,"input",a[4]),q(k,"change",a[5]),q(g,"change",a[7]),q(e,"submit",ke(a[2]))],Z=!0)},p(o,f){if(f&2&&i.value!==o[1].name&&w(i,o[1].name),f&2&&v.value!==o[1].desc&&w(v,o[1].desc),f&2&&R(k,o[1].region),f&2){D=$(J.counties.filter(o[6]));let r;for(r=0;r<D.length;r+=1){const I=pe(o,D,r);m[r]?m[r].p(I,f):(m[r]=he(I),m[r].c(),m[r].m(g,null))}for(;r<m.length;r+=1)m[r].d(1);m.length=D.length}f&2&&R(g,o[1].county)},d(o){o&&b(e),ce(E,o),ce(m,o),Z=!1,ve(le)}}}function Be(a){let e,l=a[11].name+"",t;return{c(){e=_("option"),t=de(l),this.h()},l(n){e=p(n,"OPTION",{});var c=S(e);t=me(c,l),c.forEach(b),this.h()},h(){e.__value=a[11].name,w(e,e.__value)},m(n,c){U(n,e,c),u(e,t)},p:Q,d(n){n&&b(e)}}}function he(a){let e,l=a[8].name+"",t,n;return{c(){e=_("option"),t=de(l),this.h()},l(c){e=p(c,"OPTION",{});var i=S(e);t=me(i,l),i.forEach(b),this.h()},h(){e.__value=n=a[8].name,w(e,e.__value)},m(c,i){U(c,e,i),u(e,t)},p(c,i){i&2&&l!==(l=c[8].name+"")&&ye(t,l),i&2&&n!==(n=c[8].name)&&(e.__value=n,w(e,e.__value))},d(c){c&&b(e)}}}function Ie(a){let e,l="Skapa en klubb",t,n;function c(s,d){return s[0]?Ae:xe}let i=c(a),h=i(a);return{c(){e=_("h1"),e.textContent=l,t=P(),h.c(),n=ie()},l(s){e=p(s,"H1",{"data-svelte-h":!0}),O(e)!=="svelte-1o0g4or"&&(e.textContent=l),t=L(s),h.l(s),n=ie()},m(s,d){U(s,e,d),U(s,t,d),h.m(s,d),U(s,n,d)},p(s,[d]){i===(i=c(s))&&h?h.p(s,d):(h.d(1),h=i(s),h&&(h.c(),h.m(n.parentNode,n)))},i:Q,o:Q,d(s){s&&(b(e),b(t),b(n)),h.d(s)}}}function Ne(a,e,l){let t;Ee.subscribe(C=>l(0,t=C));let n={name:"",desc:"",region:"",county:""};async function c(){l(1,n.applicants=[],n),l(1,n.members=[G(K,"users",t.uid)],n),l(1,n.owner=G(K,"users",t.uid),n);const C=await Pe(Le(K,"clubs"),n);await fe(G(K,"users",t.uid),{joinedClubs:_e(C)}),await fe(G(K,"users",t.uid),{ownedClubs:_e(C)}),Se("/club")}function i(){n.name=this.value,l(1,n)}function h(){n.desc=this.value,l(1,n)}function s(){n.region=ue(this),l(1,n)}const d=C=>{var v;return C.regionCode===((v=J.regions.find(j=>j.name===n.region))==null?void 0:v.regionCode)};function F(){n.county=ue(this),l(1,n)}return[t,n,c,i,h,s,d,F]}class Ke extends ge{constructor(e){super(),Ce(this,e,Ne,Ie,be,{})}}export{Ke as component};
