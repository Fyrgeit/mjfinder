import{s as xe,d as Ge,n as ue,r as et,c as lt,o as nt,k as ge}from"../chunks/scheduler.UsNOiup1.js";import{S as ot,i as at,e as d,t as S,s as N,c as m,a as E,b as j,d as s,f as O,m as W,n as U,g as v,h as _,z as pe,A as ve,B as ee,C as rt,j as X,r as ke,o as Je,y as qe}from"../chunks/index.SfHOU22x.js";import{h as Ce,u as tt}from"../chunks/await_block.3Tv_SGXg.js";import{e as se}from"../chunks/each.6w4Ej4nR.js";import{j as Fe,a as q,d as F,u as x,k as te,e as Ke,m as it}from"../chunks/firebase.b69GNaWb.js";import{p as st}from"../chunks/stores.veLmwFHN.js";import{u as ut}from"../chunks/store.MIH45tLv.js";import{g as ct}from"../chunks/entry.ek2OuyI0.js";import{r as _e}from"../chunks/regionsAndCounties.34LWOHa2.js";const ft="auto",At=Object.freeze(Object.defineProperty({__proto__:null,prerender:ft},Symbol.toStringTag,{value:"Module"}));function Ve(l,e,o){const t=l.slice();return t[19]=e[o],t}function Qe(l,e,o){const t=l.slice();return t[19]=e[o],t}function We(l,e,o){const t=l.slice();return t[26]=e[o],t}function _t(l,e,o){const t=l.slice();return t[29]=e[o],t}function ht(l){let e,o=l[29].name+"",t;return{c(){e=d("option"),t=S(o),this.h()},l(r){e=m(r,"OPTION",{});var n=E(e);t=j(n,o),n.forEach(s),this.h()},h(){e.__value=l[29].name,pe(e,e.__value)},m(r,n){v(r,e,n),_(e,t)},p:ue,d(r){r&&s(e)}}}function Xe(l){let e,o=l[26].name+"",t,r;return{c(){e=d("option"),t=S(o),this.h()},l(n){e=m(n,"OPTION",{});var a=E(e);t=j(a,o),a.forEach(s),this.h()},h(){e.__value=r=l[26].name,pe(e,e.__value)},m(n,a){v(n,e,a),_(e,t)},p(n,a){a[0]&1&&o!==(o=n[26].name+"")&&X(t,o),a[0]&1&&r!==(r=n[26].name)&&(e.__value=r,pe(e,e.__value))},d(n){n&&s(e)}}}function pt(l){let e,o="Inga medlemmar";return{c(){e=d("p"),e.textContent=o},l(t){e=m(t,"P",{"data-svelte-h":!0}),W(e)!=="svelte-gmda3p"&&(e.textContent=o)},m(t,r){v(t,e,r)},p:ue,d(t){t&&s(e)}}}function dt(l){var r;let e,o=se((r=l[1])==null?void 0:r.members),t=[];for(let n=0;n<o.length;n+=1)t[n]=Ze(Qe(l,o,n));return{c(){e=d("ul");for(let n=0;n<t.length;n+=1)t[n].c()},l(n){e=m(n,"UL",{});var a=E(e);for(let i=0;i<t.length;i+=1)t[i].l(a);a.forEach(s)},m(n,a){v(n,e,a);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(n,a){var i;if(a[0]&1058){o=se((i=n[1])==null?void 0:i.members);let u;for(u=0;u<o.length;u+=1){const h=Qe(n,o,u);t[u]?t[u].p(h,a):(t[u]=Ze(h),t[u].c(),t[u].m(e,null))}for(;u<t.length;u+=1)t[u].d(1);t.length=o.length}},d(n){n&&s(e),ke(t,n)}}}function mt(l){let e,o,t=l[23]+"",r;return{c(){e=d("p"),o=S("Error: "),r=S(t)},l(n){e=m(n,"P",{});var a=E(e);o=j(a,"Error: "),r=j(a,t),a.forEach(s)},m(n,a){v(n,e,a),_(e,o),_(e,r)},p(n,a){a[0]&2&&t!==(t=n[23]+"")&&X(r,t)},d(n){n&&s(e)}}}function bt(l){var u;let e,o,t=l[22].username+"",r,n,a,i=l[19].id!=((u=l[1])==null?void 0:u.owner.id)&&Ye(l);return{c(){e=d("li"),o=d("a"),r=S(t),a=N(),i&&i.c(),this.h()},l(h){e=m(h,"LI",{});var b=E(e);o=m(b,"A",{href:!0});var L=E(o);r=j(L,t),L.forEach(s),a=O(b),i&&i.l(b),b.forEach(s),this.h()},h(){U(o,"href",n="/users/"+l[19].id)},m(h,b){v(h,e,b),_(e,o),_(o,r),_(e,a),i&&i.m(e,null)},p(h,b){var L;b[0]&2&&t!==(t=h[22].username+"")&&X(r,t),b[0]&2&&n!==(n="/users/"+h[19].id)&&U(o,"href",n),h[19].id!=((L=h[1])==null?void 0:L.owner.id)?i?i.p(h,b):(i=Ye(h),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(h){h&&s(e),i&&i.d()}}}function Ye(l){let e,o="Sparka",t,r;return{c(){e=d("button"),e.textContent=o,this.h()},l(n){e=m(n,"BUTTON",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-ypvuty"&&(e.textContent=o),this.h()},h(){U(e,"class","small")},m(n,a){v(n,e,a),t||(r=ee(e,"click",function(){ge(l[5](l[19]))&&l[5](l[19]).apply(this,arguments)}),t=!0)},p(n,a){l=n},d(n){n&&s(e),t=!1,r()}}}function vt(l){let e,o="Laddar användare...";return{c(){e=d("p"),e.textContent=o},l(t){e=m(t,"P",{"data-svelte-h":!0}),W(e)!=="svelte-1m7snij"&&(e.textContent=o)},m(t,r){v(t,e,r)},p:ue,d(t){t&&s(e)}}}function Ze(l){let e,o,t,r={ctx:l,current:null,token:null,hasCatch:!0,pending:vt,then:bt,catch:mt,value:22,error:23};return Ce(o=l[10](l[19]),r),{c(){e=d("li"),r.block.c(),t=N()},l(n){e=m(n,"LI",{});var a=E(e);r.block.l(a),t=O(a),a.forEach(s)},m(n,a){v(n,e,a),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=t,_(e,t)},p(n,a){l=n,r.ctx=l,a[0]&2&&o!==(o=l[10](l[19]))&&Ce(o,r)||tt(r,l,a)},d(n){n&&s(e),r.block.d(),r.token=null,r=null}}}function gt(l){let e,o="Inga ansökande";return{c(){e=d("p"),e.textContent=o},l(t){e=m(t,"P",{"data-svelte-h":!0}),W(e)!=="svelte-9olsv0"&&(e.textContent=o)},m(t,r){v(t,e,r)},p:ue,d(t){t&&s(e)}}}function kt(l){var r;let e,o=se((r=l[1])==null?void 0:r.applicants),t=[];for(let n=0;n<o.length;n+=1)t[n]=Re(Ve(l,o,n));return{c(){e=d("ul");for(let n=0;n<t.length;n+=1)t[n].c()},l(n){e=m(n,"UL",{});var a=E(e);for(let i=0;i<t.length;i+=1)t[i].l(a);a.forEach(s)},m(n,a){v(n,e,a);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(n,a){var i;if(a[0]&1218){o=se((i=n[1])==null?void 0:i.applicants);let u;for(u=0;u<o.length;u+=1){const h=Ve(n,o,u);t[u]?t[u].p(h,a):(t[u]=Re(h),t[u].c(),t[u].m(e,null))}for(;u<t.length;u+=1)t[u].d(1);t.length=o.length}},d(n){n&&s(e),ke(t,n)}}}function Ct(l){let e,o,t=l[23]+"",r;return{c(){e=d("p"),o=S("Error: "),r=S(t)},l(n){e=m(n,"P",{});var a=E(e);o=j(a,"Error: "),r=j(a,t),a.forEach(s)},m(n,a){v(n,e,a),_(e,o),_(e,r)},p(n,a){a[0]&2&&t!==(t=n[23]+"")&&X(r,t)},d(n){n&&s(e)}}}function yt(l){let e,o,t=l[22].username+"",r,n,a,i,u="Godkänn",h,b,L="Neka",G,z;return{c(){e=d("li"),o=d("a"),r=S(t),a=N(),i=d("button"),i.textContent=u,h=N(),b=d("button"),b.textContent=L,this.h()},l(w){e=m(w,"LI",{});var p=E(e);o=m(p,"A",{href:!0});var g=E(o);r=j(g,t),g.forEach(s),a=O(p),i=m(p,"BUTTON",{class:!0,"data-svelte-h":!0}),W(i)!=="svelte-1lh4cfi"&&(i.textContent=u),h=O(p),b=m(p,"BUTTON",{class:!0,"data-svelte-h":!0}),W(b)!=="svelte-1h564me"&&(b.textContent=L),p.forEach(s),this.h()},h(){U(o,"href",n="/users/"+l[19].id),U(i,"class","small"),U(b,"class","small hollow")},m(w,p){v(w,e,p),_(e,o),_(o,r),_(e,a),_(e,i),_(e,h),_(e,b),G||(z=[ee(i,"click",function(){ge(l[6](l[19]))&&l[6](l[19]).apply(this,arguments)}),ee(b,"click",function(){ge(l[7](l[19]))&&l[7](l[19]).apply(this,arguments)})],G=!0)},p(w,p){l=w,p[0]&2&&t!==(t=l[22].username+"")&&X(r,t),p[0]&2&&n!==(n="/users/"+l[19].id)&&U(o,"href",n)},d(w){w&&s(e),G=!1,et(z)}}}function Et(l){let e,o="Laddar användare...";return{c(){e=d("p"),e.textContent=o},l(t){e=m(t,"P",{"data-svelte-h":!0}),W(e)!=="svelte-1m7snij"&&(e.textContent=o)},m(t,r){v(t,e,r)},p:ue,d(t){t&&s(e)}}}function Re(l){let e,o,t,r={ctx:l,current:null,token:null,hasCatch:!0,pending:Et,then:yt,catch:Ct,value:22,error:23};return Ce(o=l[10](l[19]),r),{c(){e=d("li"),r.block.c(),t=N()},l(n){e=m(n,"LI",{});var a=E(e);r.block.l(a),t=O(a),a.forEach(s)},m(n,a){v(n,e,a),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=t,_(e,t)},p(n,a){l=n,r.ctx=l,a[0]&2&&o!==(o=l[10](l[19]))&&Ce(o,r)||tt(r,l,a)},d(n){n&&s(e),r.block.d(),r.token=null,r=null}}}function $e(l){var C,J;let e,o,t=((C=l[1])==null?void 0:C.members.length)+"",r,n,a,i,u,h,b=((J=l[1])==null?void 0:J.applicants.length)+"",L,G,z,w;function p(f,y){var T;return((T=f[1])==null?void 0:T.members.length)>0?dt:pt}let g=p(l),B=g(l);function I(f,y){var T;return((T=f[1])==null?void 0:T.applicants.length)>0?kt:gt}let H=I(l),P=H(l);return{c(){e=d("h2"),o=S("Medlemmar ("),r=S(t),n=S(")"),a=N(),B.c(),i=N(),u=d("h2"),h=S("Ansökande ("),L=S(b),G=S(")"),z=N(),P.c(),w=Je(),this.h()},l(f){e=m(f,"H2",{class:!0});var y=E(e);o=j(y,"Medlemmar ("),r=j(y,t),n=j(y,")"),y.forEach(s),a=O(f),B.l(f),i=O(f),u=m(f,"H2",{class:!0});var T=E(u);h=j(T,"Ansökande ("),L=j(T,b),G=j(T,")"),T.forEach(s),z=O(f),P.l(f),w=Je(),this.h()},h(){U(e,"class","svelte-1hmdrxy"),U(u,"class","svelte-1hmdrxy")},m(f,y){v(f,e,y),_(e,o),_(e,r),_(e,n),v(f,a,y),B.m(f,y),v(f,i,y),v(f,u,y),_(u,h),_(u,L),_(u,G),v(f,z,y),P.m(f,y),v(f,w,y)},p(f,y){var T,Y;y[0]&2&&t!==(t=((T=f[1])==null?void 0:T.members.length)+"")&&X(r,t),g===(g=p(f))&&B?B.p(f,y):(B.d(1),B=g(f),B&&(B.c(),B.m(i.parentNode,i))),y[0]&2&&b!==(b=((Y=f[1])==null?void 0:Y.applicants.length)+"")&&X(L,b),H===(H=I(f))&&P?P.p(f,y):(P.d(1),P=H(f),P&&(P.c(),P.m(w.parentNode,w)))},d(f){f&&(s(e),s(a),s(i),s(u),s(z),s(w)),B.d(f),P.d(f)}}}function wt(l){var Ue,Ae,Me,ze;let e,o=((Ue=l[1])==null?void 0:Ue.name)+"",t,r,n,a=((Ae=l[1])==null?void 0:Ae.desc)+"",i,u,h,b=((Me=l[1])==null?void 0:Me.county)+"",L,G,z=((ze=l[1])==null?void 0:ze.region)+"",w,p,g,B,I,H,P,C="Kort beskrivning",J,f,y,T,Y,Ne="Plats (region)",ye,K,Ee,le,ne,Oe="Plats (kommun)",we,V,Pe,oe,Te,de,me,Se=l[2],ce,Z,je="Ta bort klubb",Le,Be,Ie=se(_e.regions),R=[];for(let c=0;c<Ie.length;c+=1)R[c]=ht(_t(l,Ie,c));let fe=se(_e.counties.filter(l[13])),A=[];for(let c=0;c<fe.length;c+=1)A[c]=Xe(We(l,fe,c));let $=$e(l);return{c(){e=d("h1"),t=S(o),r=N(),n=d("p"),i=S(a),u=N(),h=d("p"),L=S(b),G=S(", "),w=S(z),p=N(),g=d("br"),B=N(),I=d("form"),H=d("p"),P=d("label"),P.textContent=C,J=N(),f=d("input"),y=N(),T=d("p"),Y=d("label"),Y.textContent=Ne,ye=N(),K=d("select");for(let c=0;c<R.length;c+=1)R[c].c();Ee=N(),le=d("p"),ne=d("label"),ne.textContent=Oe,we=N(),V=d("select");for(let c=0;c<A.length;c+=1)A[c].c();Pe=N(),oe=d("button"),Te=S("Spara ändringar"),me=N(),$.c(),ce=N(),Z=d("button"),Z.textContent=je,this.h()},l(c){e=m(c,"H1",{});var k=E(e);t=j(k,o),k.forEach(s),r=O(c),n=m(c,"P",{});var D=E(n);i=j(D,a),D.forEach(s),u=O(c),h=m(c,"P",{class:!0});var ae=E(h);L=j(ae,b),G=j(ae,", "),w=j(ae,z),ae.forEach(s),p=O(c),g=m(c,"BR",{}),B=O(c),I=m(c,"FORM",{});var Q=E(I);H=m(Q,"P",{});var re=E(H);P=m(re,"LABEL",{for:!0,"data-svelte-h":!0}),W(P)!=="svelte-2xcsvt"&&(P.textContent=C),J=O(re),f=m(re,"INPUT",{type:!0,id:!0}),re.forEach(s),y=O(Q),T=m(Q,"P",{});var M=E(T);Y=m(M,"LABEL",{for:!0,"data-svelte-h":!0}),W(Y)!=="svelte-zbriib"&&(Y.textContent=Ne),ye=O(M),K=m(M,"SELECT",{id:!0});var he=E(K);for(let ie=0;ie<R.length;ie+=1)R[ie].l(he);he.forEach(s),M.forEach(s),Ee=O(Q),le=m(Q,"P",{});var be=E(le);ne=m(be,"LABEL",{for:!0,"data-svelte-h":!0}),W(ne)!=="svelte-ck5n8k"&&(ne.textContent=Oe),we=O(be),V=m(be,"SELECT",{id:!0});var De=E(V);for(let ie=0;ie<A.length;ie+=1)A[ie].l(De);De.forEach(s),be.forEach(s),Pe=O(Q),oe=m(Q,"BUTTON",{});var He=E(oe);Te=j(He,"Spara ändringar"),He.forEach(s),Q.forEach(s),me=O(c),$.l(c),ce=O(c),Z=m(c,"BUTTON",{class:!0,"data-svelte-h":!0}),W(Z)!=="svelte-9ojdzd"&&(Z.textContent=je),this.h()},h(){U(h,"class","toned-down"),U(P,"for","desc"),U(f,"type","text"),U(f,"id","desc"),U(Y,"for","region"),U(K,"id","region"),l[0].region===void 0&&Ge(()=>l[12].call(K)),U(ne,"for","county"),U(V,"id","county"),l[0].county===void 0&&Ge(()=>l[14].call(V)),oe.disabled=de=l[4]||l[3],U(Z,"class","hollow")},m(c,k){v(c,e,k),_(e,t),v(c,r,k),v(c,n,k),_(n,i),v(c,u,k),v(c,h,k),_(h,L),_(h,G),_(h,w),v(c,p,k),v(c,g,k),v(c,B,k),v(c,I,k),_(I,H),_(H,P),_(H,J),_(H,f),pe(f,l[0].desc),_(I,y),_(I,T),_(T,Y),_(T,ye),_(T,K);for(let D=0;D<R.length;D+=1)R[D]&&R[D].m(K,null);ve(K,l[0].region,!0),_(I,Ee),_(I,le),_(le,ne),_(le,we),_(le,V);for(let D=0;D<A.length;D+=1)A[D]&&A[D].m(V,null);ve(V,l[0].county,!0),_(I,Pe),_(I,oe),_(oe,Te),v(c,me,k),$.m(c,k),v(c,ce,k),v(c,Z,k),Le||(Be=[ee(f,"input",l[11]),ee(K,"change",l[12]),ee(K,"change",function(){ge(l[0].county="")&&(l[0].county="").apply(this,arguments)}),ee(V,"change",l[14]),ee(I,"submit",rt(l[9])),ee(Z,"click",l[8])],Le=!0)},p(c,k){var D,ae,Q,re;if(l=c,k[0]&2&&o!==(o=((D=l[1])==null?void 0:D.name)+"")&&X(t,o),k[0]&2&&a!==(a=((ae=l[1])==null?void 0:ae.desc)+"")&&X(i,a),k[0]&2&&b!==(b=((Q=l[1])==null?void 0:Q.county)+"")&&X(L,b),k[0]&2&&z!==(z=((re=l[1])==null?void 0:re.region)+"")&&X(w,z),k[0]&1&&f.value!==l[0].desc&&pe(f,l[0].desc),k[0]&1&&ve(K,l[0].region),k[0]&1){fe=se(_e.counties.filter(l[13]));let M;for(M=0;M<fe.length;M+=1){const he=We(l,fe,M);A[M]?A[M].p(he,k):(A[M]=Xe(he),A[M].c(),A[M].m(V,null))}for(;M<A.length;M+=1)A[M].d(1);A.length=fe.length}k[0]&1&&ve(V,l[0].county),k[0]&24&&de!==(de=l[4]||l[3])&&(oe.disabled=de),k[0]&4&&xe(Se,Se=l[2])?($.d(1),$=$e(l),$.c(),$.m(ce.parentNode,ce)):$.p(l,k)},i:ue,o:ue,d(c){c&&(s(e),s(r),s(n),s(u),s(h),s(p),s(g),s(B),s(I),s(me),s(ce),s(Z)),ke(R,c),ke(A,c),$.d(c),Le=!1,et(Be)}}}function Pt(l,e,o){let t,r,n;lt(l,st,C=>o(16,n=C)),ut.subscribe(C=>C);let a=n.params.uid,i=!1;nt(u);async function u(){o(1,g=(await Fe(q(F,"clubs",a))).data()),o(0,p={desc:g.desc,region:g.region,county:g.county})}async function h(C){await x(q(F,"clubs",a),{members:te(C)}),await x(C,{joinedClubs:te(q(F,"clubs",a))}),await u(),o(2,i=!i)}async function b(C){await x(q(F,"clubs",a),{members:Ke(C),applicants:te(C)}),await x(C,{joinedClubs:Ke(q(F,"clubs",a)),appliedClubs:te(q(F,"clubs",a))}),await u(),o(2,i=!i)}async function L(C){await x(q(F,"clubs",a),{applicants:te(C)}),await x(C,{appliedClubs:te(q(F,"clubs",a))}),await u(),o(2,i=!i)}async function G(){await Promise.all(g.members.map(async C=>{await x(C,{joinedClubs:te(q(F,"clubs",a))})})),await x(g.owner,{ownedClubs:te(q(F,"clubs",a))}),await it(q(F,"clubs",a)),ct("/club")}async function z(){var C,J;if(((C=_e.counties.find(f=>f.name===p.county))==null?void 0:C.regionCode)!==((J=_e.regions.find(f=>f.name===p.region))==null?void 0:J.regionCode))throw new Error("dont match");await x(q(F,"clubs",a),{desc:p.desc,region:p.region,county:p.county}),await u()}async function w(C){return(await Fe(C)).data()}let p={desc:"",region:"",county:""},g=null;function B(){p.desc=this.value,o(0,p)}function I(){p.region=qe(this),o(0,p)}const H=C=>{var J;return C.regionCode===((J=_e.regions.find(f=>f.name===p.region))==null?void 0:J.regionCode)};function P(){p.county=qe(this),o(0,p)}return l.$$.update=()=>{l.$$.dirty[0]&3&&o(4,t=JSON.stringify(p)===JSON.stringify({desc:g==null?void 0:g.desc,region:g==null?void 0:g.region,county:g==null?void 0:g.county})),l.$$.dirty[0]&1&&o(3,r=p.region===""||p.county==="")},[p,g,i,r,t,h,b,L,G,z,w,B,I,H,P]}class Mt extends ot{constructor(e){super(),at(this,e,Pt,wt,xe,{},null,[-1,-1])}}export{Mt as component,At as universal};
